{"version":3,"file":"view.js","mappings":"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","sources":["webpack://wc-checkout-payment-consumer-loans/external window \"React\"","webpack://wc-checkout-payment-consumer-loans/external window [\"wc\",\"blocksCheckout\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wc\",\"blocksComponents\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wc\",\"wcSettings\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wp\",\"apiFetch\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wp\",\"element\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wp\",\"htmlEntities\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wp\",\"i18n\"]","webpack://wc-checkout-payment-consumer-loans/external window [\"wp\",\"url\"]","webpack://wc-checkout-payment-consumer-loans/webpack/bootstrap","webpack://wc-checkout-payment-consumer-loans/webpack/runtime/compat get default export","webpack://wc-checkout-payment-consumer-loans/webpack/runtime/define property getters","webpack://wc-checkout-payment-consumer-loans/webpack/runtime/hasOwnProperty shorthand","webpack://wc-checkout-payment-consumer-loans/webpack/runtime/make namespace object","webpack://wc-checkout-payment-consumer-loans/./assets/js/payment-method-teya-cl/view.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wc\"][\"blocksCheckout\"];","module.exports = window[\"wc\"][\"blocksComponents\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { __ } from '@wordpress/i18n';\r\nimport { registerPaymentMethod } from '@woocommerce/blocks-registry';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { useEffect, useState, useCallback, useRef } from '@wordpress/element';\r\nimport { getPaymentMethodData } from '@woocommerce/settings';\r\nimport { ValidatedTextInput } from '@woocommerce/blocks-checkout';\r\nimport { RadioControl } from '@woocommerce/blocks-components';\r\n\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { addQueryArgs } from '@wordpress/url';\r\n\r\n\r\nconst settings = getPaymentMethodData( 'saltpay_cl', {} );\r\nconst defaultLabel = __( 'Teya - Consumer loans', 'saltpay-cl' );\r\nconst label = decodeEntities( settings?.title || '' ) || defaultLabel;\r\nconst logoUrl = settings?.logoUrl\r\n\r\nconst { select } = window.wp.data;\r\nconst { PAYMENT_STORE_KEY } = window.wc.wcBlocksData;\r\n\r\nconst SaltpayCLDesc = () => {\r\n\treturn decodeEntities( settings.description || '' );\r\n};\r\n\r\nfunction LoanDescription(loan) {\r\n  return (\r\n\t\t<div class=\"saltpay-cl-paymentInfo\">{loan.paymentInfo}</div>\r\n  );\r\n}\r\n\r\nfunction LoanLogo(loan) {\r\n\treturn (\r\n\t\t<div class=\"saltpay-cl-logoUrl\"><img src={loan.logoUrl} alt=\"\" /></div>\r\n  );\r\n}\r\n\r\nconst LoansList = (props) => {\r\n\tconst options = props.options;\r\n\tconst onChange = props.onChange;\r\n\tconst option = props.selected;\r\n\r\n\treturn (\r\n\t\t<div className={ 'saltpay-cl-payment' }>\r\n\t\t\t<RadioControl\r\n\t\t\t\tlabel= {defaultLabel}\r\n\t\t\t\tselected={ option }\r\n\t\t\t\tonChange= {onChange}\r\n\t\t\t\toptions= { options }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n/**\r\n * Content component\r\n */\r\nconst Content = (props) => {\r\n\tconst [loans, loansValue] = useState([]);\r\n\tconst [loansOptions, loansOptionsValue] = useState([]);\r\n\tconst [ option, setOption ] = useState('');\r\n\r\n\tconst { billing, eventRegistration, emitResponse} = props;\r\n\tconst { onPaymentSetup } = eventRegistration;\r\n\r\n\tconst amount = billing.cartTotal.value;\r\n\r\n\r\n\r\n\tconst onLoanChange = useCallback(\r\n\t\t( value ) => {\r\n\t\t\tsetOption( value );\r\n\t\t},\r\n\t\t[ option, setOption, props]\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tconst isPaymentIdle = select( PAYMENT_STORE_KEY ).isPaymentIdle();\r\n\t\tif(isPaymentIdle && amount>0 && !loans.length){\r\n\t\t\tconst queryParams = { 'amount': amount };\r\n\t\t\tconst fetchData = async () => {\r\n\t\t\t\tconst data = await apiFetch( { path:addQueryArgs( '/saltpay-cl/v1/get-loans', queryParams ) } ).then(\r\n\t\t\t\t\t( result ) => {\r\n\t\t\t\t\t\tif(result['loans'] !== undefined){\r\n\t\t\t\t\t\t\tloansValue( result['loans'] );\r\n\t\t\t\t\t\t\tsetOption(result['loans'][0].loanTypeId);\r\n\r\n\t\t\t\t\t\t\tlet radioOptions = [];\r\n\t\t\t\t\t\t\tresult['loans']?.map( ( loan ) => {\r\n\t\t\t\t\t\t\t\tlet radioOption = {\r\n\t\t\t\t\t\t\t\t \"label\": loan.paymentName,\r\n\t\t\t\t\t\t\t\t \"value\": loan.loanTypeId,\r\n\t\t\t\t\t\t\t\t \"description\": LoanDescription(loan),\r\n\t\t\t\t\t\t\t\t 'secondaryDescription': LoanLogo(loan),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tradioOption.onChange = function() {\r\n\t\t\t\t\t\t\t\t\tsetOption(loan.loanTypeId);\r\n\t\t\t\t\t\t\t\t\t//props.valueRef.current = loan.loanTypeId;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tradioOptions.push(radioOption);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tloansOptionsValue(radioOptions);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tlet result = fetchData()\r\n\t\t\t.catch(console.error);\r\n\t\t}\r\n\t}, [ amount,\r\n\t\tloansValue,\r\n\t\toption,\r\n\t\tsetOption\r\n\t] );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst unsubscribe = onPaymentSetup( async () => {\r\n\t\t\tconst metaData = {};\r\n\t\t\tif(loans.length){\r\n\t\t\t\tlet chosenLoan = {};\r\n\t\t\t\tif ( option !== '' ) {\r\n\t\t\t\t\tloans.map( ( loan ) => {\r\n\t\t\t\t\t\tif(loan.loanTypeId == option){\r\n\t\t\t\t\t\t\tchosenLoan = loan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tchosenLoan = loans[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(Object.keys(chosenLoan).length){\r\n\t\t\t\t\tif (chosenLoan.loanTypeId !== undefined)\r\n\t\t\t\t\t\tmetaData.loan_payment_id = chosenLoan.loanTypeId.toString();\r\n\t\t\t\t\tif (chosenLoan.maxNumberOfPayments !== undefined)\r\n\t\t\t\t\t\tmetaData.max_number_of_payments = chosenLoan.maxNumberOfPayments.toString();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(Object.keys(metaData).length !== 0){\r\n\t\t\t\tconst billingData = props.billing.billingData;\r\n\t\t\t\tif ( billingData.email !== undefined && billingData.email !== \"\") {\r\n\t\t\t\t\tmetaData['billing_email'] = billingData.email;\r\n\t\t\t\t}\r\n\t\t\t\tif ( billingData.phone !== undefined && billingData.phone !== \"\") {\r\n\t\t\t\t\tmetaData['billing_phone'] = billingData.phone;\r\n\t\t\t\t}\r\n\t\t\t\tif ( billingData.ssid !== undefined && billingData.ssid !== \"\") {\r\n\t\t\t\t\tmetaData['ssid'] = billingData.ssid;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet description = '';\r\n\t\t\t\tprops.cartData.cartItems.forEach((cartItem) =>{\r\n\t\t\t\t\tif (description !== \"\") description += ', ';\r\n\t\t\t\t\tdescription  += cartItem.name;\r\n\t\t\t\t});\r\n\t\t\t\tif (description !== \"\"){\r\n\t\t\t\t\tmetaData['description'] = description;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\r\n\t\t\t\t\tmeta: {\r\n\t\t\t\t\t\tpaymentMethodData: metaData\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttype: emitResponse.responseTypes.ERROR,\r\n\t\t\t\tmessage: __( 'There was an error', 'saltpay-cl' )\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t// Unsubscribes when this component is unmounted.\r\n\t\treturn () => {\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [\r\n\t\temitResponse.responseTypes.ERROR,\r\n\t\temitResponse.responseTypes.SUCCESS,\r\n\t\tonPaymentSetup,\r\n\t\tprops,\r\n\t\tloans,\r\n\t\toption\r\n\t] );\r\n\r\n\treturn [\r\n\t\t<SaltpayCLDesc />,\r\n\t\t<LoansList {...props} loans={ loans }\r\n\t\t\toptions={loansOptions}\r\n\t\t\tonChange={onLoanChange}\r\n\t\t\tselected={option}\r\n\t\t/>\r\n\t];\r\n};\r\n\r\n/**\r\n * Label component\r\n *\r\n * @param {*} props Props from payment API.\r\n */\r\nconst Label = ( props ) => {\r\n\tconst { PaymentMethodLabel } = props.components;\r\n\treturn [\r\n\t\t<PaymentMethodLabel text={ label } />,\r\n\t\t<img src={logoUrl} alt={ label } />\r\n\t];\r\n};\r\n\r\n/**\r\n * Payment method config object.\r\n */\r\nconst SaltpayCLPaymentMethod = {\r\n\tname: 'saltpay_cl',\r\n\tlabel: <Label />,\r\n\tcontent: <Content />,\r\n\tedit: <Content />,\r\n\tcanMakePayment: () => true,\r\n\tariaLabel: label,\r\n\tsupports: {\r\n\t\tfeatures: settings?.supports ?? [],\r\n\t},\r\n};\r\n\r\nregisterPaymentMethod( SaltpayCLPaymentMethod );"],"names":["__","registerPaymentMethod","decodeEntities","useEffect","useState","useCallback","useRef","getPaymentMethodData","ValidatedTextInput","RadioControl","apiFetch","addQueryArgs","settings","defaultLabel","label","title","logoUrl","select","window","wp","data","PAYMENT_STORE_KEY","wc","wcBlocksData","SaltpayCLDesc","description","LoanDescription","loan","createElement","class","paymentInfo","LoanLogo","src","alt","LoansList","props","options","onChange","option","selected","className","Content","loans","loansValue","loansOptions","loansOptionsValue","setOption","billing","eventRegistration","emitResponse","onPaymentSetup","amount","cartTotal","value","onLoanChange","isPaymentIdle","length","queryParams","fetchData","path","then","result","undefined","loanTypeId","radioOptions","map","radioOption","paymentName","push","catch","console","error","unsubscribe","metaData","chosenLoan","Object","keys","loan_payment_id","toString","maxNumberOfPayments","max_number_of_payments","billingData","email","phone","ssid","cartData","cartItems","forEach","cartItem","name","type","responseTypes","SUCCESS","meta","paymentMethodData","ERROR","message","Label","PaymentMethodLabel","components","text","SaltpayCLPaymentMethod","content","edit","canMakePayment","ariaLabel","supports","features","_settings$supports"],"sourceRoot":""}